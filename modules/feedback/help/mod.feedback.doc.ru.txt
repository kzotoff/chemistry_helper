-------------------------------------------------------------------------------
                    FEEDBACK : модуль для обратной связи
-------------------------------------------------------------------------------

Краткое описание:
	Модуль предназначен для обработки форм обратной связи


Использование:
	На страничке (неважно где) создаем форму следующего вида (указаны только
	нужные для работы модуля атрибуты, остальное добавляем по вкусу):

		---8<--- начало формы ---------------------------------------
		<form action="./" method="post">
			<input name="module" type="hidden" value="feedback" />
			<input name="action" type="hidden" value="send" />
			<input name="template" type="hidden" value="TEMPLATE" />
			<input name="recipient" type="hidden" value="ADDRESSEE" />

			<input name="feedback_name" type="text" />
			<input name="feedback_address" type="text" />
			...
			<textarea name="feedback_message"></textarea>

			<input type="submit" />
		</form>
		---8<--- конец формы ----------------------------------------

	Метод отправки - только POST.

	Первые 4 поля - обязательные, они будут давать указание обработать форму
	именно этому модулю, атрибуты name у них должны быть в точности такие,
	как указаны в примере.

	Атрибуты value первого и второго полей оставляем точно такими, иначе модуль
	не обработает ввод.

	Атрибут value третьего поля (у которого name="recipient") задает файл,
	в котором содержится шаблон для отправки письма. В этом примере будет
	использован файл templates/template_TEMPLATE.html. Если такого шаблона не
	найдется, модуль попробует использовать файл template_error_detected.html,
	если его тоже не будет - будет использована встроенная строка.

	Атрибут value четвертого поля (name="ADDRESSEE") задает получателя письма
	согласно файлу настроек. В данном примере будет выбран получатель с именем
	ADDRESSEE из раздела "addresses" настроечного файла.

	Остальные поля формы могуть быть с произвольными именами. Их значения будут
	подставлены в шаблон письма на места, обозначаемые строчками вида (указано
	для данного примера) %feedback_name%, %feedback_address% и так далее.

	Тема для отправляемого письма будет взята из тега <title> шаблона письма,
	если таковой найдется, иначе будет использована тема по умолчанию из
	настроечного файла.

	После отправки письма модуль производит перенаправление на страницу
	"service_feedback_ok" в случае успешной отправки, "service_feedback_failed"
	при неуспешной (имеется ввиду, что эти страницы нужно не забыть создать в
	модуле content).


Настройка:
	По состоянию на версию 1.0, только через настроечный файл


API:
	Не предусмотрено.


Дополнительные public-функции в модуле:
	Нет.


Управление с помошью шаблонов:
	[macro type="feedback"]
	Возможные параметры:
		type   : всегда "feedback"
		source : имя файла для формы (без расширения)
		target : значение для поля recipient
		

Константы и дополнительные файлы:
	./templates/ : папка для хранения шаблонов писем


Пример настроек:

	<config>

		<!--
			список адресов получателей письма
		-->
		<addresses>

			<!--
				первый адрес будет использован, если никакой не подойдет,
				причем даже если он не называется "default"
			-->
			<default>test1@example.com</default>

			<!--
				адрес будет выбран, если в поле recipient будет указано
				значение "ADRESSEE"
			-->
			<ADRESSEE>test2@example.com</ADRESSEE>

		</addresses>

		- тема для сообщений по умолчанию
		<default_subject>Новое сообщение с сайта</default_subject>

	</config>


Полезные советы:


Известные баги:
	неизвестно поведение генератора формы, если в шаблоне формы будет две пары <form></form>
